<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    div {
        width: 100px;
        height: 100px;
    }
</style>

<body>
    <script type="text/javascript" charset="UTF-8" src="//res.cdn.openinstall.io/openinstall.js"></script>
    <script type="text/javascript">
        window.onload = () => {
            var u = navigator.userAgent;
            //安卓终端
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;
            //ios终端
            var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);

            if (isIOS) {
                var data = OpenInstall.parseUrlParams();
                new OpenInstall({
                    /*appKey必选参数，openinstall平台为每个应用分配的ID*/
                    appKey: "ex4ims",
                    /*可选参数，自定义android平台的apk下载文件名，只有apk在openinstall托管时才有效；
                    个别andriod浏览器下载时，中文文件名显示乱码，请慎用中文文件名！*/
                    /*可选参数，是否优先考虑拉起app，以牺牲下载体验为代价*/
                    //preferWakeup:true,
                    /*openinstall初始化完成的回调函数，可选*/
                    onready: function () {
                        // var m = this,button = document.getElementById("downloadButton");
                        // button.style.visibility="visible";

                        // //用法1：如app已安装，进入网页立即拉起app；用户点击某个按钮时再开始安装app
                        /*通过scheme拉起app(如果已在openinstall平台开启scheme启动功能)*/
                        // m.schemeWakeup();
                        // /*用户点击某个按钮时(假定按钮id为downloadButton)，安装app*/
                        // button.onclick = function() {
                        //     m.wakeupOrInstall();
                        // }

                        //用法2：用户点击某个按钮拉起app，等待设定时间后app尚未拉起，再安装app
                        /*用户点击某个按钮时，安装app*/
                        //button.onclick=function(){
                        //   //500毫秒后app尚未拉起，将安装app，可自定义超时时间，单位为毫秒
                        //   m.wakeupOrInstall({timeout:500});
                        //}
                        var self = this;
                        self.schemeWakeup();
                        let down = () => {
                            self.wakeupOrInstall({
                                timeout: 500
                            });
                            return false;
                        };
                        down();
                    }

                }, data)
            } else if (isAndroid) {
                window.location = 'https://youquyl.net/apk/test001.apk';
            } else {
                window.location = 'https://youquyl.net/apk/test001.apk';
            }
        }
    </script>
    <% include ../../../common/stats/index.ejs %>
</body>

</html>